<script setup>
import { ref } from 'vue'
import { AlertTitle } from './ui/alert'
import Alert from './ui/alert/Alert.vue'
import AlertDescription from './ui/alert/AlertDescription.vue'

const isAlertVisible = ref(false)

const cloverMessage = ref([
  {
    title: 'ë‹¹ì‹ ì„ ì‘ì›í•©ë‹ˆë‹¤ ğŸ˜˜',
    message: 'í™”ì´íŒ…!!',
  },
  {
    title: 'ì˜¤ëŠ˜ë„ ì¢‹ì€ í•˜ë£¨ ë³´ë‚´ì„¸ìš” ğŸŒŸ',
    message: 'ë‹¹ì‹ ì˜ í•˜ë£¨ê°€ í–‰ë³µìœ¼ë¡œ ê°€ë“í•˜ê¸¸!',
  },
  {
    title: 'í˜ë‚´ì„¸ìš”! ğŸ’ª',
    message: 'ë‹¹ì‹ ì€ í•  ìˆ˜ ìˆì–´ìš”!',
  },
  {
    title: 'í–‰ë³µí•œ ì—¬í–‰ë˜ì„¸ìš” âœˆï¸',
    message: 'ì¦ê±°ìš´ ì¶”ì–µ ë§Œë“œì‹œê¸¸ ë°”ëë‹ˆë‹¤!',
  },
  {
    title: 'ì•„ë³´í•˜ì™€ í•¨ê»˜í•´ìš” ğŸ€',
    message: 'ì¢‹ì€ ê³³ ë§ì´ ì°¾ìœ¼ì‹œê¸¸ ë°”ë„ê²Œìš”!',
  },
])

const handleCloverClick = () => {
  isAlertVisible.value = true

  console.log(Math.floor(Math.random() * cloverMessage.value.length))
  console.log(cloverMessage.value[0].message)

  setTimeout(() => {
    isAlertVisible.value = false
  }, 3000)
}
</script>

<template>
  <Transition name="fade">
    <Alert
      v-show="isAlertVisible"
      class="absolute transition-all duration-300 bg-green-100 left-1/5 w-96 top-20"
      variant=""
    >
      <AlertTitle class="font-bold text-center">{{
        cloverMessage[Math.floor(Math.random() * cloverMessage.length)].title
      }}</AlertTitle>
      <AlertDescription class="pt-6 text-center">
        {{
          cloverMessage[Math.floor(Math.random() * cloverMessage.length)]
            .message
        }}
      </AlertDescription>
    </Alert>
  </Transition>
  <div class="relative w-4/5 h-full overflow-hidden">
    <div
      @click="handleCloverClick"
      v-for="n in 10"
      :key="n"
      class="transition-all cursor-pointer clover hover:scale-110"
      :style="{ '--delay': `${n * 2}s`, '--position': `${n * 10}%` }"
    >
      <span>ğŸ€</span>
    </div>

    <div class="flex flex-col items-center w-full h-full gap-9 md:flex-row">
      <div class="flex items-start justify-around w-full h-[30rem]">
        <!-- ê¸€ì ê³µê°„ -->
        <div class="flex flex-col justify-around h-full mt-6">
          <div class="flex flex-col gap-8">
            <h1 class="text-6xl font-bold md:text-9xl font-Namum">ì•„ë³´í•˜</h1>
            <h2
              class="pr-4 overflow-hidden text-xl italic border-r-2 md:text-3xl border-r-black animate-typing whitespace-nowrap"
              aria-label="ì•„ì£¼ ë³´í†µì˜ í•˜ë£¨, íŠ¹ë³„í•œ ì—¬ì •ì„ ì‹œì‘í•˜ë‹¤"
            >
              "ì•„ì£¼ ë³´í†µì˜ í•˜ë£¨, íŠ¹ë³„í•œ ì—¬ì •ì„ ì‹œì‘í•˜ë‹¤."
            </h2>
          </div>
          <pre
            class="pr-4 mt-8 font-sans text-lg leading-relaxed text-wrap line-clamp-3"
          >
ì•„ë³´í•˜ëŠ” í‰ë²”í•œ ì¼ìƒ ì†ì—ì„œ ëŠë¼ëŠ” ì‘ì€ ëª¨í—˜ê³¼ ìƒˆë¡œìš´ ê²½í—˜ì„ í†µí•´,
ì—¬í–‰ì„ ê¼­ ë¨¼ ê³³ì—ì„œ í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì¼ìƒì˜ ì¼ë¶€ë¡œ ì¦ê¸¸ ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.
          </pre>
        </div>
        <!-- ì´ë¯¸ì§€ ê³µê°„ -->
        <div
          class="shadow-green-200 shadow-2xl rounded-lg shrink-0 w-[460px] h-[460px] animate-in"
        >
          <img
            class="object-cover rounded-xl size-full"
            src="@/assets/mainPage_image.jpg"
            alt="ì•„ë³´í•˜ ë©”ì¸ ì´ë¯¸ì§€"
            loading="lazy"
          />
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped>
.clover {
  position: absolute;
  top: -20px;
  font-size: 20px;
  animation: falling var(--duration, 15s) var(--delay, 0s) linear infinite;
  left: var(--position, 0);
  opacity: 0.7;
  transform-style: preserve-3d;
  transform: translateZ(0);
}

.clover:hover {
  transform: scale(1.2);
}

@keyframes falling {
  0% {
    transform: translateY(-20px) rotate(0deg);
    opacity: 0.7;
  }
  50% {
    transform: translateY(50vh) rotate(180deg);
    opacity: 0.8;
  }
  100% {
    transform: translateY(100vh) rotate(360deg);
    opacity: 0.7;
  }
}

/* ê° í´ë¡œë²„ë§ˆë‹¤ ë‹¤ë¥¸ ì• ë‹ˆë©”ì´ì…˜ ì†ë„ì™€ íšŒì „ì„ ì£¼ê¸° ìœ„í•œ ê°œë³„ ì„¤ì • */
.clover:nth-child(2n) {
  --duration: 13s;
  font-size: 15px;
}

.clover:nth-child(3n) {
  --duration: 17s;
  font-size: 25px;
}

.clover:nth-child(4n) {
  --duration: 22s;
  font-size: 18px;
}

.clover:nth-child(5n) {
  --duration: 19s;
  font-size: 22px;
}

.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.2s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}
</style>
